<Window xmlns="https://github.com/avaloniaui"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:vm="using:EasySaveInterface.ViewModels"
        xmlns:model="using:EasySave.Model"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        mc:Ignorable="d" d:DesignWidth="900" d:DesignHeight="550"
        x:Class="EasySaveInterface.Views.MainWindow"
        x:DataType="vm:MainWindowViewModel"
        Icon="/Assets/avalonia-logo.ico"
        Title="EasySave">

	<Design.DataContext>
		<vm:MainWindowViewModel/>
	</Design.DataContext>

	<Grid RowDefinitions="Auto,*,Auto" Margin="0">

		<!-- Header -->
		<Border Grid.Row="0" Background="#252526" Padding="20,15">
			<Grid ColumnDefinitions="*,Auto,Auto">
				<TextBlock Grid.Column="0"
                          Text="{Binding TextMenuTitle}"
                          FontSize="24"
                          FontWeight="Bold"
                          Foreground="#FFFFFF"
                          VerticalAlignment="Center"/>

				<StackPanel Grid.Column="1" Orientation="Horizontal" Spacing="10" Margin="0,0,20,0">
					<TextBlock Text="{Binding TextLabelLanguage}" Foreground="#CCCCCC" VerticalAlignment="Center"/>
					<ComboBox ItemsSource="{Binding Languages}"
                             SelectedItem="{Binding SelectedLanguage}"
                             Width="120"/>
				</StackPanel>

				<StackPanel Grid.Column="2" Orientation="Horizontal" Spacing="10">
					<TextBlock Text="{Binding TextLabelLogFormat}" Foreground="#CCCCCC" VerticalAlignment="Center"/>
					<ComboBox ItemsSource="{Binding LogFormats}"
                             SelectedItem="{Binding SelectedLogFormat}"
                             Width="100"/>
				</StackPanel>
			</Grid>
		</Border>

		<!-- Content -->
		<Grid Grid.Row="1" ColumnDefinitions="270,*" Margin="0">

			<!-- Left sidebar: menu -->
			<Border Grid.Column="0" Background="#252526" BorderBrush="#3F3F46" BorderThickness="0,0,1,0">
				<ScrollViewer>
					<StackPanel Margin="10">
						<TextBlock Text="{Binding TextMenuLabel}"
								   FontSize="12"
								   FontWeight="Bold"
								   Foreground="#CCCCCC"
								   Margin="5,10,5,15"/>

						<Button Classes="menu-button" Command="{Binding GoToCreateCommand}">
							<TextBlock Text="{Binding TextCreateBackup}"/>
						</Button>

						<Button Classes="menu-button" Command="{Binding GoToExecuteJobCommand}">
							<TextBlock Text="{Binding TextExecuteBackup}"/>
						</Button>

						<Button Classes="menu-button" Command="{Binding GoToExecuteAllCommand}">
							<TextBlock Text="{Binding TextExecuteAll}"/>
						</Button>

						<Button Classes="menu-button" Command="{Binding GoToExecuteRangeCommand}">
							<TextBlock Text="{Binding TextExecuteRange}"/>
						</Button>

						<Button Classes="menu-button" Command="{Binding GoToExecuteSelectionCommand}">
							<TextBlock Text="{Binding TextExecuteSpecific}"/>
						</Button>

						<Button Classes="menu-button" Command="{Binding GoToDeleteCommand}">
							<TextBlock Text="{Binding TextDeleteJobs}"/>
						</Button>
					</StackPanel>
				</ScrollViewer>
			</Border>

			<!-- Right panel: pages -->
			<ScrollViewer Grid.Column="1">
				<StackPanel Margin="30,20" Spacing="15">

					<!-- ========== PAGE: Create ========== -->
					<StackPanel IsVisible="{Binding IsCreatePage}" Spacing="15">
						<TextBlock Text="{Binding TextCreateBackup}"
								   FontWeight="Bold"
								   FontSize="22"
								   Foreground="#FFFFFF"
								   Margin="0,0,0,10"/>

						<Border Background="#2D2D30" CornerRadius="6" Padding="20" BorderBrush="#3F3F46" BorderThickness="1">
							<StackPanel Spacing="15">
								<StackPanel>
									<TextBlock Text="{Binding TextPromptName}" Foreground="#CCCCCC" FontSize="12" Margin="0,0,0,5"/>
									<TextBox Watermark="Ex: Backup_Documents"
											 Text="{Binding NewJobName}"
											 Height="36"/>
								</StackPanel>

								<StackPanel>
									<TextBlock Text="{Binding TextPromptSource}" Foreground="#CCCCCC" FontSize="12" Margin="0,0,0,5"/>
									<TextBox Watermark="Ex: C:\Users\Documents"
											 Text="{Binding NewJobSource}"
											 Height="36"/>
								</StackPanel>

								<StackPanel>
									<TextBlock Text="{Binding TextPromptTarget}" Foreground="#CCCCCC" FontSize="12" Margin="0,0,0,5"/>
									<TextBox Watermark="Ex: D:\Backups\Documents"
											 Text="{Binding NewJobTarget}"
											 Height="36"/>
								</StackPanel>

								<StackPanel>
									<TextBlock Text="{Binding TextPromptType}" Foreground="#CCCCCC" FontSize="12" Margin="0,0,0,5"/>
									<ComboBox ItemsSource="{Binding BackupTypes}"
											  SelectedItem="{Binding NewJobType}"
											  Height="36"
											  HorizontalAlignment="Stretch"/>
								</StackPanel>

								<Button Content="{Binding TextCreateBackup}"
										Classes="primary"
										Command="{Binding CreateJobCommand}"
										HorizontalAlignment="Left"
										Margin="0,10,0,0"/>
							</StackPanel>
						</Border>
					</StackPanel>



					<!-- ========== PAGE: Execute Job ========== -->
					<StackPanel IsVisible="{Binding IsExecuteJobPage}" Spacing="15">
						<TextBlock Text="{Binding TextExecuteBackup}"
                                   FontWeight="Bold"
                                   FontSize="22"
                                   Foreground="#FFFFFF"
                                   Margin="0,0,0,10"/>

						<TextBlock Text="{Binding TextSelectJobExecute}" Foreground="#CCCCCC" FontSize="13"/>

						<ListBox ItemsSource="{Binding Jobs}"
                                 SelectedIndex="{Binding SelectedJobIndex}"
                                 MinHeight="200"
                                 MaxHeight="350">
							<ListBox.ItemTemplate>
								<DataTemplate x:DataType="model:BackupJob">
									<StackPanel Spacing="5">
										<StackPanel Orientation="Horizontal" Spacing="10">
											<TextBlock Text="{Binding Name}" FontWeight="Bold" FontSize="14"/>
											<Border Background="#007ACC" CornerRadius="3" Padding="5,2">
												<TextBlock Text="{Binding Type}" FontSize="10" Foreground="White"/>
											</Border>
										</StackPanel>
										<StackPanel Orientation="Horizontal" Spacing="4">
											<TextBlock Text="{Binding $parent[Window].DataContext.TextLabelSource}" Foreground="#888888" FontSize="11"/>
											<TextBlock Text="{Binding SourceDir}" Foreground="#888888" FontSize="11"/>
										</StackPanel>
										<StackPanel Orientation="Horizontal" Spacing="4">
											<TextBlock Text="{Binding $parent[Window].DataContext.TextLabelTarget}" Foreground="#888888" FontSize="11"/>
											<TextBlock Text="{Binding TargetDir}" Foreground="#888888" FontSize="11"/>
										</StackPanel>
									</StackPanel>
								</DataTemplate>
							</ListBox.ItemTemplate>
						</ListBox>

						<Button Content="{Binding TextBtnExecute}"
                                Classes="primary"
                                Command="{Binding ExecuteJobCommand}"
                                HorizontalAlignment="Left"
                                IsEnabled="{Binding !IsExecuting}"/>
					</StackPanel>

					<!-- ========== PAGE: Execute All ========== -->
					<StackPanel IsVisible="{Binding IsExecuteAllPage}" Spacing="12">
						<TextBlock Text="{Binding TextExecuteAll}" FontWeight="Bold" FontSize="18"/>
						<TextBlock Text="{Binding TextJobsWillExecute}" Foreground="#CCCCCC"/>
						<ItemsControl ItemsSource="{Binding Jobs}">
							<ItemsControl.ItemTemplate>
								<DataTemplate x:DataType="model:BackupJob">
									<StackPanel Orientation="Horizontal" Spacing="10" Margin="0,2">
										<TextBlock Text="{Binding Name}" FontWeight="Bold"/>
										<TextBlock Text="{Binding Type}" Foreground="#AAAAAA"/>
									</StackPanel>
								</DataTemplate>
							</ItemsControl.ItemTemplate>
						</ItemsControl>
						<Button Content="{Binding TextBtnExecuteAll}" Command="{Binding ExecuteAllJobsCommand}" HorizontalAlignment="Left"/>
					</StackPanel>

					<!-- ========== PAGE: Execute Range ========== -->
					<StackPanel IsVisible="{Binding IsExecuteRangePage}" Spacing="12">
						<TextBlock Text="{Binding TextExecuteRange}" FontWeight="Bold" FontSize="18"/>
						<TextBlock Text="{Binding TextJobsAvailable}" Foreground="#CCCCCC"/>
						<ItemsControl ItemsSource="{Binding Jobs}">
							<ItemsControl.ItemTemplate>
								<DataTemplate x:DataType="model:BackupJob">
									<StackPanel Orientation="Horizontal" Spacing="10" Margin="0,2">
										<TextBlock Text="{Binding Name}" FontWeight="Bold"/>
										<TextBlock Text="{Binding Type}" Foreground="#AAAAAA"/>
									</StackPanel>
								</DataTemplate>
							</ItemsControl.ItemTemplate>
						</ItemsControl>
						<TextBlock Text="{Binding TextEnterNumbersSemicolon}" Foreground="#CCCCCC" Margin="0,5,0,0"/>
						<TextBox Watermark="ex: 1;3" Text="{Binding SelectedIndicesText}" Width="250" HorizontalAlignment="Left"/>
						<Button Content="{Binding TextBtnExecuteRange}" Command="{Binding ExecuteRangeCommand}" HorizontalAlignment="Left"/>
					</StackPanel>

					<!-- ========== PAGE: Execute Selection ========== -->
					<StackPanel IsVisible="{Binding IsExecuteSelectionPage}" Spacing="12">
						<TextBlock Text="{Binding TextExecuteSpecific}" FontWeight="Bold" FontSize="18"/>
						<TextBlock Text="{Binding TextJobsAvailable}" Foreground="#CCCCCC"/>
						<ItemsControl ItemsSource="{Binding Jobs}">
							<ItemsControl.ItemTemplate>
								<DataTemplate x:DataType="model:BackupJob">
									<StackPanel Orientation="Horizontal" Spacing="10" Margin="0,2">
										<TextBlock Text="{Binding Name}" FontWeight="Bold"/>
										<TextBlock Text="{Binding Type}" Foreground="#AAAAAA"/>
									</StackPanel>
								</DataTemplate>
							</ItemsControl.ItemTemplate>
						</ItemsControl>
						<TextBlock Text="{Binding TextEnterNumbersSemicolon}" Foreground="#CCCCCC" Margin="0,5,0,0"/>
						<TextBox Watermark="ex: 1;3;5" Text="{Binding SelectedIndicesText}" Width="250" HorizontalAlignment="Left"/>
						<Button Content="{Binding TextBtnExecuteSelection}" Command="{Binding ExecuteSelectedJobsCommand}" HorizontalAlignment="Left"/>
					</StackPanel>

					<!-- ========== PAGE: Delete ========== -->
					<StackPanel IsVisible="{Binding IsDeletePage}" Spacing="12">
						<TextBlock Text="{Binding TextDeleteJobs}" FontWeight="Bold" FontSize="18"/>
						<TextBlock Text="{Binding TextSelectJobDelete}" Foreground="#CCCCCC"/>
						<ListBox ItemsSource="{Binding Jobs}"
								 SelectedIndex="{Binding SelectedJobIndex}">
							<ListBox.ItemTemplate>
								<DataTemplate x:DataType="model:BackupJob">
									<StackPanel Orientation="Horizontal" Spacing="10">
										<TextBlock Text="{Binding Name}" FontWeight="Bold"/>
										<TextBlock Text="{Binding Type}" Foreground="#AAAAAA"/>
										<TextBlock Text="{Binding SourceDir}" Foreground="#888888" FontSize="11"/>
									</StackPanel>
								</DataTemplate>
							</ListBox.ItemTemplate>
						</ListBox>
						<Button Content="{Binding TextBtnDelete}" Command="{Binding DeleteJobCommand}" HorizontalAlignment="Left"/>
					</StackPanel>

					<!-- Status message -->
					<TextBlock Text="{Binding StatusMessage}"
							   Foreground="#4EC9B0"
							   FontSize="14"
							   FontWeight="SemiBold"
							   Margin="0,10,0,0"
							   IsVisible="{Binding StatusMessage, Converter={x:Static StringConverters.IsNotNullOrEmpty}}"/>

				</StackPanel>

			</ScrollViewer>

		</Grid>
	</Grid>

</Window>
