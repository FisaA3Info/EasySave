<Window xmlns="https://github.com/avaloniaui"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:vm="using:EasySaveInterface.ViewModels"
        xmlns:model="using:EasySave.Model"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        mc:Ignorable="d" d:DesignWidth="900" d:DesignHeight="550"
        x:Class="EasySaveInterface.Views.MainWindow"
        x:DataType="vm:MainWindowViewModel"
        Icon="/Assets/avalonia-logo.ico"
        Title="EasySave">

	<Design.DataContext>
		<vm:MainWindowViewModel/>
	</Design.DataContext>

	<Grid RowDefinitions="Auto,*,Auto" Margin="0">

		<!-- Header -->
		<Border Grid.Row="0" Background="#252526" Padding="20,15">
			<Grid ColumnDefinitions="*,Auto,Auto">
				<TextBlock Grid.Column="0"
                          Text="=== EasySave ==="
                          FontSize="24"
                          FontWeight="Bold"
                          Foreground="#FFFFFF"
                          VerticalAlignment="Center"/>

				<StackPanel Grid.Column="1" Orientation="Horizontal" Spacing="10" Margin="0,0,20,0">
					<TextBlock Text="Langue:" Foreground="#CCCCCC" VerticalAlignment="Center"/>
					<ComboBox ItemsSource="{Binding Languages}"
                             SelectedItem="{Binding SelectedLanguage}"
                             Width="120"/>
				</StackPanel>

				<StackPanel Grid.Column="2" Orientation="Horizontal" Spacing="10">
					<TextBlock Text="Format logs:" Foreground="#CCCCCC" VerticalAlignment="Center"/>
					<ComboBox ItemsSource="{Binding LogFormats}"
                             SelectedItem="{Binding SelectedLogFormat}"
                             Width="100"/>
				</StackPanel>
			</Grid>
		</Border>

		<!-- Content -->
		<Grid Grid.Row="1" ColumnDefinitions="270,*" Margin="0">

			<!-- Left sidebar: menu -->
			<Border Grid.Column="0" Background="#252526" BorderBrush="#3F3F46" BorderThickness="0,0,1,0">
				<ScrollViewer>
					<StackPanel Margin="10">
						<TextBlock Text="MENU"
								   FontSize="12"
								   FontWeight="Bold"
								   Foreground="#CCCCCC"
								   Margin="5,10,5,15"/>

						<Button Classes="menu-button" Command="{Binding GoToCreateCommand}">
							<TextBlock Text="1. Créer un job"/>
						</Button>

						<Button Classes="menu-button" Command="{Binding GoToExecuteJobCommand}">
							<TextBlock Text="2. Exécuter un job"/>
						</Button>

						<Button Classes="menu-button" Command="{Binding GoToExecuteAllCommand}">
							<TextBlock Text="3. Exécuter tous les jobs"/>
						</Button>

						<Button Classes="menu-button" Command="{Binding GoToExecuteRangeCommand}">
							<TextBlock Text="4. Exécuter une plage"/>
						</Button>

						<Button Classes="menu-button" Command="{Binding GoToExecuteSelectionCommand}">
							<TextBlock Text="5. Exécuter jobs spécifiques"/>
						</Button>

						<Button Classes="menu-button" Command="{Binding GoToDeleteCommand}">
							<TextBlock Text="6. Supprimer un job"/>
						</Button>
					</StackPanel>
				</ScrollViewer>
			</Border>

			<!-- Right panel: pages -->
			<ScrollViewer Grid.Column="1">
				<StackPanel Margin="30,20" Spacing="15">

						<!-- ========== PAGE: Create ========== -->
						<StackPanel IsVisible="{Binding IsCreatePage}" Spacing="15">
							<TextBlock Text=" == Créer un nouveau job =="
									   FontWeight="Bold"
									   FontSize="22"
									   Foreground="#FFFFFF"
									   Margin="0,0,0,10"/>

							<Border Background="#2D2D30" CornerRadius="6" Padding="20" BorderBrush="#3F3F46" BorderThickness="1">
								<StackPanel Spacing="15">
									<StackPanel>
										<TextBlock Text="Nom du job *" Foreground="#CCCCCC" FontSize="12" Margin="0,0,0,5"/>
										<TextBox Watermark="Ex: Backup_Documents"
												 Text="{Binding NewJobName}"
												 Height="36"/>
									</StackPanel>

									<StackPanel>
										<TextBlock Text="Répertoire source *" Foreground="#CCCCCC" FontSize="12" Margin="0,0,0,5"/>
										<TextBox Watermark="Ex: C:\Users\Documents"
												 Text="{Binding NewJobSource}"
												 Height="36"/>
									</StackPanel>

									<StackPanel>
										<TextBlock Text="Répertoire cible *" Foreground="#CCCCCC" FontSize="12" Margin="0,0,0,5"/>
										<TextBox Watermark="Ex: D:\Backups\Documents"
												 Text="{Binding NewJobTarget}"
												 Height="36"/>
									</StackPanel>

									<StackPanel>
										<TextBlock Text="Type de sauvegarde *" Foreground="#CCCCCC" FontSize="12" Margin="0,0,0,5"/>
										<ComboBox ItemsSource="{Binding BackupTypes}"
												  SelectedItem="{Binding NewJobType}"
												  Height="36"
												  HorizontalAlignment="Stretch"/>
									</StackPanel>

									<Button Content="Créer le job"
											Classes="primary"
											Command="{Binding CreateJobCommand}"
											HorizontalAlignment="Left"
											Margin="0,10,0,0"/>
								</StackPanel>
							</Border>
						</StackPanel>



						<!-- ========== PAGE: Execute Job ========== -->
						<StackPanel IsVisible="{Binding IsExecuteJobPage}" Spacing="15">
                        <TextBlock Text="== Exécuter un job =="
                                   FontWeight="Bold"
                                   FontSize="22"
                                   Foreground="#FFFFFF"
                                   Margin="0,0,0,10"/>

                        <TextBlock Text="Sélectionnez le job à exécuter :" Foreground="#CCCCCC" FontSize="13"/>

                        <ListBox ItemsSource="{Binding Jobs}"
                                 SelectedIndex="{Binding SelectedJobIndex}"
                                 MinHeight="200"
                                 MaxHeight="350">
                            <ListBox.ItemTemplate>
                                <DataTemplate x:DataType="model:BackupJob">
                                    <StackPanel Spacing="5">
                                        <StackPanel Orientation="Horizontal" Spacing="10">
                                            <TextBlock Text="{Binding Name}" FontWeight="Bold" FontSize="14"/>
                                            <Border Background="#007ACC" CornerRadius="3" Padding="5,2">
                                                <TextBlock Text="{Binding Type}" FontSize="10" Foreground="White"/>
                                            </Border>
                                        </StackPanel>
                                        <TextBlock Foreground="#888888" FontSize="11">
                                            <Run Text="Source:"/>
                                            <Run Text="{Binding SourceDir}"/>
                                        </TextBlock>
                                        <TextBlock Foreground="#888888" FontSize="11">
                                            <Run Text="Cible:"/>
                                            <Run Text="{Binding TargetDir}"/>
                                        </TextBlock>
                                    </StackPanel>
                                </DataTemplate>
                            </ListBox.ItemTemplate>
                        </ListBox>

                        <Button Content="Exécuter"
                                Classes="primary"
                                Command="{Binding ExecuteJobCommand}"
                                HorizontalAlignment="Left"
                                IsEnabled="{Binding !IsExecuting}"/>
                    </StackPanel>

						<!-- ========== PAGE: Execute All ========== -->
						<StackPanel IsVisible="{Binding IsExecuteAllPage}" Spacing="15">
                        <TextBlock Text="== Exécuter tous les jobs =="
                                   FontWeight="Bold"
                                   FontSize="22"
                                   Foreground="#FFFFFF"
                                   Margin="0,0,0,10"/>

                        <TextBlock Text="Les jobs suivants seront exécutés :" Foreground="#CCCCCC" FontSize="13"/>

                        <Border Background="#2D2D30" CornerRadius="6" Padding="15" BorderBrush="#3F3F46" BorderThickness="1">
                            <ItemsControl ItemsSource="{Binding Jobs}">
                                <ItemsControl.ItemTemplate>
                                    <DataTemplate x:DataType="model:BackupJob">
                                        <StackPanel Orientation="Horizontal" Spacing="10" Margin="0,5">
                                            <TextBlock Text="•" Foreground="#007ACC" FontSize="16" VerticalAlignment="Center"/>
                                            <TextBlock Text="{Binding Name}" FontWeight="Bold"/>
                                            <TextBlock Text="-" Foreground="#666666"/>
                                            <TextBlock Text="{Binding Type}" Foreground="#AAAAAA"/>
                                        </StackPanel>
                                    </DataTemplate>
                                </ItemsControl.ItemTemplate>
                            </ItemsControl>
                        </Border>

                        <Button Content="Exécuter tous les jobs"
                                Classes="primary"
                                Command="{Binding ExecuteAllJobsCommand}"
                                HorizontalAlignment="Left"
                                IsEnabled="{Binding !IsExecuting}"/>
                    </StackPanel>

						<!-- ========== PAGE: Execute Range ========== -->
						<StackPanel IsVisible="{Binding IsExecuteRangePage}" Spacing="12">
							<TextBlock Text="Exécuter une plage de jobs" FontWeight="Bold" FontSize="18"/>
							<TextBlock Text="Jobs disponibles :" Foreground="#CCCCCC"/>
							<ItemsControl ItemsSource="{Binding Jobs}">
								<ItemsControl.ItemTemplate>
									<DataTemplate x:DataType="model:BackupJob">
										<StackPanel Orientation="Horizontal" Spacing="10" Margin="0,2">
											<TextBlock Text="{Binding Name}" FontWeight="Bold"/>
											<TextBlock Text="{Binding Type}" Foreground="#AAAAAA"/>
										</StackPanel>
									</DataTemplate>
								</ItemsControl.ItemTemplate>
							</ItemsControl>
							<TextBlock Text="Entrez les numéros séparés par des points-virgules :" Foreground="#CCCCCC" Margin="0,5,0,0"/>
							<TextBox Watermark="ex: 1;3" Text="{Binding SelectedIndicesText}" Width="250" HorizontalAlignment="Left"/>
							<Button Content="Exécuter la plage" Command="{Binding ExecuteRangeCommand}" HorizontalAlignment="Left"/>
						</StackPanel>

						<!-- ========== PAGE: Execute Selection ========== -->
						<StackPanel IsVisible="{Binding IsExecuteSelectionPage}" Spacing="12">
							<TextBlock Text="Exécuter des jobs spécifiques" FontWeight="Bold" FontSize="18"/>
							<TextBlock Text="Jobs disponibles :" Foreground="#CCCCCC"/>
							<ItemsControl ItemsSource="{Binding Jobs}">
								<ItemsControl.ItemTemplate>
									<DataTemplate x:DataType="model:BackupJob">
										<StackPanel Orientation="Horizontal" Spacing="10" Margin="0,2">
											<TextBlock Text="{Binding Name}" FontWeight="Bold"/>
											<TextBlock Text="{Binding Type}" Foreground="#AAAAAA"/>
										</StackPanel>
									</DataTemplate>
								</ItemsControl.ItemTemplate>
							</ItemsControl>
							<TextBlock Text="Entrez les numéros séparés par des points-virgules :" Foreground="#CCCCCC" Margin="0,5,0,0"/>
							<TextBox Watermark="ex: 1;3;5" Text="{Binding SelectedIndicesText}" Width="250" HorizontalAlignment="Left"/>
							<Button Content="Exécuter la sélection" Command="{Binding ExecuteSelectedJobsCommand}" HorizontalAlignment="Left"/>
						</StackPanel>

						<!-- ========== PAGE: Delete ========== -->
						<StackPanel IsVisible="{Binding IsDeletePage}" Spacing="12">
							<TextBlock Text="Supprimer un job" FontWeight="Bold" FontSize="18"/>
							<TextBlock Text="Sélectionnez le job à supprimer :" Foreground="#CCCCCC"/>
							<ListBox ItemsSource="{Binding Jobs}"
                                     SelectedIndex="{Binding SelectedJobIndex}">
								<ListBox.ItemTemplate>
									<DataTemplate x:DataType="model:BackupJob">
										<StackPanel Orientation="Horizontal" Spacing="10">
											<TextBlock Text="{Binding Name}" FontWeight="Bold"/>
											<TextBlock Text="{Binding Type}" Foreground="#AAAAAA"/>
											<TextBlock Text="{Binding SourceDir}" Foreground="#888888" FontSize="11"/>
										</StackPanel>
									</DataTemplate>
								</ListBox.ItemTemplate>
							</ListBox>
							<Button Content="Supprimer" Command="{Binding DeleteJobCommand}" HorizontalAlignment="Left"/>
						</StackPanel>

					</StackPanel>

			</ScrollViewer>

		</Grid>
	</Grid>

</Window>
